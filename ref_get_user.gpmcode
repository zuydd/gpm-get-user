{"Id":"217e99cd-c88c-4fc3-905a-5929ef595dcd","ActionOrBlocks":[{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":0,"Name":"Script get user/query_id by zuydd - https://github.com/zuydd","ActionOrBlocks":[{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":0,"Name":"Config","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":52,"Title":"Nhập bot ID","ElementXpath":"","RawInput":"Nhập bot ID","VariableNameForOutput":"botID"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":52,"Title":"Nhập ref ID","ElementXpath":"","RawInput":"Nhập ref ID","VariableNameForOutput":"refID"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":52,"Title":"Set decode","ElementXpath":"","RawInput":"Decode user/query_id (nhập 0 để bỏ qua, nhập 1 để decode kết quả)","VariableNameForOutput":"is_decode"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":52,"Title":"Nhập số giây delay đóng profile","ElementXpath":"","RawInput":"Nhập số giây delay đóng profile để nhận ref, tuỳ bot mà nhập cho phù hợp, nếu không chờ ref thì để 0. 1000 ứng với 1s","VariableNameForOutput":"delay_close"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":52,"Title":"Đường dẫn thư mục lưu file","ElementXpath":"","RawInput":"Đường dẫn thư mục lưu file","VariableNameForOutput":"file_path"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":"","IsExpandUI":true}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":0,"Name":"Truy cập bot","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":2,"Title":"Truy cập bot","ElementXpath":"","RawInput":"https://z-airdrop.web.app/get-user?bot=$botID&ref=$refID","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":8,"Title":"Chờ load bot","ElementXpath":"//div[@class='popup popup-peer popup-confirmation active']","RawInput":"30","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":12,"Title":"Click confirm open bot","ElementXpath":"//div[contains(@class, 'popup popup-peer popup-confirmation active')]//button[contains(@class, 'popup-button btn primary')]","RawInput":"0","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":28,"Title":"Dừng chờ","ElementXpath":"","RawInput":"1000,2000","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":3,"Name":"kiểm tra đã open bot chưa","ActionOrBlocks":[{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":4,"Name":"If","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":12,"Title":"Click confirm open bot","ElementXpath":"//div[contains(@class, 'popup popup-peer popup-confirmation active')]//button[contains(@class, 'popup-button btn primary')]","RawInput":"0","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":5,"Name":"Else","ActionOrBlocks":[],"BlockCondition":"","ForBlockLoopCount":null,"IsExpandUI":true}}],"BlockCondition":"hasElement(//div[@class='popup popup-peer popup-confirmation active'])","ForBlockLoopCount":"","IsExpandUI":true}},{"Type":0,"Action":{"ActionType":8,"Title":"Chờ load iframe","ElementXpath":"//iframe[@class=\"payment-verification\"]","RawInput":"20","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":"","IsExpandUI":true}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":0,"Name":"Lấy iframe","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":30,"Title":"get telegram id","ElementXpath":"","RawInput":"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); const decodedData = decodeURIComponent(query_id); const userStringMatch = decodedData.match(/user=(.+?)(&|$)/); let id = null; if (userStringMatch) { const userString = decodeURIComponent(userStringMatch[1]); const userObject = JSON.parse(userString); id = userObject.id; } return id;","VariableNameForOutput":"telegram_id"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":3,"Name":"Sử lý decode","ActionOrBlocks":[{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":4,"Name":"If","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":30,"Title":"get user/query_id (decode)","ElementXpath":"","RawInput":"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); return decodeURIComponent(query_id)","VariableNameForOutput":"query_id"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":null,"IsExpandUI":true}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":5,"Name":"Else","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":30,"Title":"get user/query_id","ElementXpath":"","RawInput":"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); return query_id","VariableNameForOutput":"query_id"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":null,"IsExpandUI":true}}],"BlockCondition":"$is_decode like 1","ForBlockLoopCount":"","IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":"","IsExpandUI":true}},{"Type":1,"Action":{"ActionType":0,"Title":null,"ElementXpath":null,"RawInput":null,"VariableNameForOutput":null},"Block":{"BlockType":0,"Name":"Ghi dữ liệu","ActionOrBlocks":[{"Type":0,"Action":{"ActionType":36,"Title":"Tạo excel workbook","ElementXpath":"","RawInput":"$file_path\\$botID.xlsx","VariableNameForOutput":"wb"},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":33,"Title":"Ghi profile name vào excel","ElementXpath":null,"RawInput":"$wb;A;$profile_name","VariableNameForOutput":null},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":33,"Title":"Ghi telegram id vào excel","ElementXpath":null,"RawInput":"$wb;B;$telegram_id","VariableNameForOutput":null},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":33,"Title":"Ghi user/query_id vào excel","ElementXpath":null,"RawInput":"$wb;C;$query_id","VariableNameForOutput":null},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}},{"Type":0,"Action":{"ActionType":28,"Title":"Delay close chờ ref","ElementXpath":"","RawInput":"$delay_close,$delay_close","VariableNameForOutput":""},"Block":{"BlockType":0,"Name":null,"ActionOrBlocks":[],"BlockCondition":null,"ForBlockLoopCount":null,"IsExpandUI":false}}],"BlockCondition":"","ForBlockLoopCount":"","IsExpandUI":true}}],"BlockCondition":"","ForBlockLoopCount":"","IsExpandUI":true}}],"VariableData":[{"Name":"excel","Action":null},{"Name":"profile_id","Action":null},{"Name":"profile_name","Action":null},{"Name":"loopIndex","Action":null},{"Name":"botID","Action":{"ActionType":52,"Title":"Nhập bot ID","ElementXpath":"","RawInput":"Nhập bot ID","VariableNameForOutput":"botID"}},{"Name":"refID","Action":{"ActionType":52,"Title":"Nhập ref ID","ElementXpath":"","RawInput":"Nhập ref ID","VariableNameForOutput":"refID"}},{"Name":"is_decode","Action":{"ActionType":52,"Title":"Set decode","ElementXpath":"","RawInput":"Decode user/query_id (nhập 0 để bỏ qua, nhập 1 để decode kết quả)","VariableNameForOutput":"is_decode"}},{"Name":"delay_close","Action":{"ActionType":52,"Title":"Nhập số giây delay đóng profile","ElementXpath":"","RawInput":"Nhập số giây delay đóng profile để nhận ref, tuỳ bot mà nhập cho phù hợp, nếu không chờ ref thì để 0. 1000 ứng với 1s","VariableNameForOutput":"delay_close"}},{"Name":"file_path","Action":{"ActionType":52,"Title":"Đường dẫn thư mục lưu file","ElementXpath":"","RawInput":"Đường dẫn thư mục lưu file","VariableNameForOutput":"file_path"}},{"Name":"telegram_id","Action":{"ActionType":30,"Title":"get telegram id","ElementXpath":"","RawInput":"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); const decodedData = decodeURIComponent(query_id); const userStringMatch = decodedData.match(/user=(.+?)(&|$)/); let id = null; if (userStringMatch) { const userString = decodeURIComponent(userStringMatch[1]); const userObject = JSON.parse(userString); id = userObject.id; } return id;","VariableNameForOutput":"telegram_id"}},{"Name":"query_id","Action":{"ActionType":30,"Title":"get user/query_id (decode)","ElementXpath":"","RawInput":"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); return decodeURIComponent(query_id)","VariableNameForOutput":"query_id"}},{"Name":"wb","Action":{"ActionType":36,"Title":"Tạo excel workbook","ElementXpath":"","RawInput":"$file_path\\$botID.xlsx","VariableNameForOutput":"wb"}}]}